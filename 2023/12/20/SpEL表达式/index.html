<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>
        FBCD&#39;S BLOG
    </title>
    
<link rel="stylesheet" href="/libs/highlight/styles/monokai-sublime.css">

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 7.0.0"></head>

<body id="bodyx">
    <div class="hd posts">
    <a href="/index.html"><i class="fa fa-reply replay-btn" aria-hidden="true"></i></a>
    <div class="post-title">
        <p>
            SpEL表达式
        </p>
        <hr>
    </div>
    <div class="post-content">
        <h2 id="SpEL表达式"><a href="#SpEL表达式" class="headerlink" title="SpEL表达式"></a>SpEL表达式</h2><p>现代的软件开发，瞄准的是一个低耦合低代码的理解，如何使用逻辑分离，数据单独管理的操作，才是一个现代程序开发人员应该掌握的东西，不应该进行逻辑的冗余理解！</p>
<p><img src="D:\myBlog\public\img\image-20231125202244341.png" alt="image-20231125202244341"></p>
<ul>
<li><p>EL表达式的整体逻辑实现，这里我进行了一些抽象理解，源码相关的其实并没有去自习理解，但是总体的执行流程是如此的</p>
<ul>
<li><p>传入EL表达式字符串，EL表达式一般都是以字符串的形式来进行理解的，他是通过对字符串切分然后解析而到达最终结果的一个过程</p>
</li>
<li><p>词法分析：词法分析其实就是对传入的字符串进行的分析操作，对字符串进行切分理解，其实有一点逆波兰表达式的理解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">protected</span> SpelExpression <span class="title function_">doParseExpression</span><span class="params">(String expressionString, <span class="meta">@Nullable</span> ParserContext context)</span></span><br><span class="line">			<span class="keyword">throws</span> ParseException &#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="built_in">this</span>.expressionString = expressionString;</span><br><span class="line">			<span class="type">Tokenizer</span> <span class="variable">tokenizer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Tokenizer</span>(expressionString);</span><br><span class="line">			<span class="built_in">this</span>.tokenStream = tokenizer.process();</span><br><span class="line">			<span class="built_in">this</span>.tokenStreamLength = <span class="built_in">this</span>.tokenStream.size();</span><br><span class="line">			<span class="built_in">this</span>.tokenStreamPointer = <span class="number">0</span>;</span><br><span class="line">			<span class="built_in">this</span>.constructedNodes.clear();</span><br><span class="line">			<span class="type">SpelNodeImpl</span> <span class="variable">ast</span> <span class="operator">=</span> eatExpression();</span><br><span class="line">			Assert.state(ast != <span class="literal">null</span>, <span class="string">&quot;No node&quot;</span>);</span><br><span class="line">			<span class="type">Token</span> <span class="variable">t</span> <span class="operator">=</span> peekToken();</span><br><span class="line">			<span class="keyword">if</span> (t != <span class="literal">null</span>) &#123;</span><br><span class="line">				<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SpelParseException</span>(t.startPos, SpelMessage.MORE_INPUT, toString(nextToken()));</span><br><span class="line">			&#125;</span><br><span class="line">			Assert.isTrue(<span class="built_in">this</span>.constructedNodes.isEmpty(), <span class="string">&quot;At least one node expected&quot;</span>);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SpelExpression</span>(expressionString, ast, <span class="built_in">this</span>.configuration);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">catch</span> (InternalParseException ex) &#123;</span><br><span class="line">			<span class="keyword">throw</span> ex.getCause();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>词法分析的源代码，是将字符串拆分进行传递，完全就是堆栈的思想理解，将相关字符传递到一个内存空间中，这个空间是其实现的char数组</p>
</li>
</ul>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/FBCD1012/TheImageRepository/main/image-20231125203053921.png" alt="image-20231125203053921"></p>
<p>总体来讲，这里利用数组进行的操作，我觉得不是非常妥当，效率下降了许多！还是觉得用栈非常的优质，无论是实现什么操作，这都比单纯的数组要来的痛快，并且高效</p>
<h3 id="语法解析："><a href="#语法解析：" class="headerlink" title="语法解析："></a>语法解析：</h3><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/453333109">https://zhuanlan.zhihu.com/p/453333109</a></p>
<p>这里源码进行了封装，我就无法就去进行理解了，到是得到了一个非常牛逼的小知识，这也是idea的魔法，解析用户输入的操作，然后将相关的东西进行解析，返回给用户，然后利用用户选择的操作再进行操作</p>
<ul>
<li>但是语法解析度本质，就是生成一个表达式对象树，然后遍历对象树进行解析操作，这就是字典树的理解</li>
</ul>
<h3 id="生成抽象表达式对象"><a href="#生成抽象表达式对象" class="headerlink" title="生成抽象表达式对象"></a>生成抽象表达式对象</h3><p>这个生成的表达式对象利用expression进行封装，封装了之后里面存在一些调用对象的相关参数的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Copyright 2002-2017 the original author or authors.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></span><br><span class="line"><span class="comment"> * you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment"> * You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *      https://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span><br><span class="line"><span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment"> * See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment"> * limitations under the License.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> org.springframework.expression;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.core.convert.TypeDescriptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.lang.Nullable;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * An expression capable of evaluating itself against context objects.</span></span><br><span class="line"><span class="comment"> * Encapsulates the details of a previously parsed expression string.</span></span><br><span class="line"><span class="comment"> * Provides a common abstraction for expression evaluation.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Keith Donald</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Andy Clement</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Juergen Hoeller</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 3.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Expression</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Return the original string used to create this expression (unmodified).</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the original expression string</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	String <span class="title function_">getExpressionString</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Evaluate this expression in the default standard context.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the evaluation result</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem during evaluation</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	Object <span class="title function_">getValue</span><span class="params">()</span> <span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Evaluate the expression in the default context. If the result</span></span><br><span class="line"><span class="comment">	 * of the evaluation does not match (and cannot be converted to)</span></span><br><span class="line"><span class="comment">	 * the expected result type then an exception will be returned.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> desiredResultType the class the caller would like the result to be</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the evaluation result</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem during evaluation</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	&lt;T&gt; T <span class="title function_">getValue</span><span class="params">(<span class="meta">@Nullable</span> Class&lt;T&gt; desiredResultType)</span> <span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Evaluate this expression against the specified root object.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> rootObject the root object against which to evaluate the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the evaluation result</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem during evaluation</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	Object <span class="title function_">getValue</span><span class="params">(<span class="meta">@Nullable</span> Object rootObject)</span> <span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Evaluate the expression in the default context against the specified root</span></span><br><span class="line"><span class="comment">	 * object. If the result of the evaluation does not match (and cannot be</span></span><br><span class="line"><span class="comment">	 * converted to) the expected result type then an exception will be returned.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> rootObject the root object against which to evaluate the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> desiredResultType the class the caller would like the result to be</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the evaluation result</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem during evaluation</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	&lt;T&gt; T <span class="title function_">getValue</span><span class="params">(<span class="meta">@Nullable</span> Object rootObject, <span class="meta">@Nullable</span> Class&lt;T&gt; desiredResultType)</span> <span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Evaluate this expression in the provided context and return the result</span></span><br><span class="line"><span class="comment">	 * of evaluation.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> context the context in which to evaluate the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the evaluation result</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem during evaluation</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	Object <span class="title function_">getValue</span><span class="params">(EvaluationContext context)</span> <span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Evaluate this expression in the provided context and return the result</span></span><br><span class="line"><span class="comment">	 * of evaluation, but use the supplied root context as an override for any</span></span><br><span class="line"><span class="comment">	 * default root object specified in the context.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> context the context in which to evaluate the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> rootObject the root object against which to evaluate the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the evaluation result</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem during evaluation</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	Object <span class="title function_">getValue</span><span class="params">(EvaluationContext context, <span class="meta">@Nullable</span> Object rootObject)</span> <span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Evaluate the expression in a specified context which can resolve references</span></span><br><span class="line"><span class="comment">	 * to properties, methods, types, etc. The type of the evaluation result is</span></span><br><span class="line"><span class="comment">	 * expected to be of a particular class and an exception will be thrown if it</span></span><br><span class="line"><span class="comment">	 * is not and cannot be converted to that type.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> context the context in which to evaluate the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> desiredResultType the class the caller would like the result to be</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the evaluation result</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem during evaluation</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	&lt;T&gt; T <span class="title function_">getValue</span><span class="params">(EvaluationContext context, <span class="meta">@Nullable</span> Class&lt;T&gt; desiredResultType)</span> <span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Evaluate the expression in a specified context which can resolve references</span></span><br><span class="line"><span class="comment">	 * to properties, methods, types, etc. The type of the evaluation result is</span></span><br><span class="line"><span class="comment">	 * expected to be of a particular class and an exception will be thrown if it</span></span><br><span class="line"><span class="comment">	 * is not and cannot be converted to that type. The supplied root object</span></span><br><span class="line"><span class="comment">	 * overrides any default specified on the supplied context.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> context the context in which to evaluate the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> rootObject the root object against which to evaluate the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> desiredResultType the class the caller would like the result to be</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the evaluation result</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem during evaluation</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	&lt;T&gt; T <span class="title function_">getValue</span><span class="params">(EvaluationContext context, <span class="meta">@Nullable</span> Object rootObject, <span class="meta">@Nullable</span> Class&lt;T&gt; desiredResultType)</span></span><br><span class="line">			<span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Return the most general type that can be passed to a &#123;<span class="doctag">@link</span> #setValue&#125;</span></span><br><span class="line"><span class="comment">	 * method using the default context.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the most general type of value that can be set on this context</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem determining the type</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	Class&lt;?&gt; getValueType() <span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Return the most general type that can be passed to the</span></span><br><span class="line"><span class="comment">	 * &#123;<span class="doctag">@link</span> #setValue(Object, Object)&#125; method using the default context.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> rootObject the root object against which to evaluate the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the most general type of value that can be set on this context</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem determining the type</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	Class&lt;?&gt; getValueType(<span class="meta">@Nullable</span> Object rootObject) <span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Return the most general type that can be passed to the</span></span><br><span class="line"><span class="comment">	 * &#123;<span class="doctag">@link</span> #setValue(EvaluationContext, Object)&#125; method for the given context.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> context the context in which to evaluate the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the most general type of value that can be set on this context</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem determining the type</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	Class&lt;?&gt; getValueType(EvaluationContext context) <span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Return the most general type that can be passed to the</span></span><br><span class="line"><span class="comment">	 * &#123;<span class="doctag">@link</span> #setValue(EvaluationContext, Object, Object)&#125; method for the given</span></span><br><span class="line"><span class="comment">	 * context. The supplied root object overrides any specified in the context.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> context the context in which to evaluate the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> rootObject the root object against which to evaluate the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the most general type of value that can be set on this context</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem determining the type</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	Class&lt;?&gt; getValueType(EvaluationContext context, <span class="meta">@Nullable</span> Object rootObject) <span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Return the most general type that can be passed to a &#123;<span class="doctag">@link</span> #setValue&#125;</span></span><br><span class="line"><span class="comment">	 * method using the default context.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> a type descriptor for values that can be set on this context</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem determining the type</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	TypeDescriptor <span class="title function_">getValueTypeDescriptor</span><span class="params">()</span> <span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Return the most general type that can be passed to the</span></span><br><span class="line"><span class="comment">	 * &#123;<span class="doctag">@link</span> #setValue(Object, Object)&#125; method using the default context.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> rootObject the root object against which to evaluate the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> a type descriptor for values that can be set on this context</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem determining the type</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	TypeDescriptor <span class="title function_">getValueTypeDescriptor</span><span class="params">(<span class="meta">@Nullable</span> Object rootObject)</span> <span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Return the most general type that can be passed to the</span></span><br><span class="line"><span class="comment">	 * &#123;<span class="doctag">@link</span> #setValue(EvaluationContext, Object)&#125; method for the given context.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> context the context in which to evaluate the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> a type descriptor for values that can be set on this context</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem determining the type</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	TypeDescriptor <span class="title function_">getValueTypeDescriptor</span><span class="params">(EvaluationContext context)</span> <span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Return the most general type that can be passed to the</span></span><br><span class="line"><span class="comment">	 * &#123;<span class="doctag">@link</span> #setValue(EvaluationContext, Object, Object)&#125; method for the given</span></span><br><span class="line"><span class="comment">	 * context. The supplied root object overrides any specified in the context.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> context the context in which to evaluate the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> rootObject the root object against which to evaluate the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> a type descriptor for values that can be set on this context</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem determining the type</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	TypeDescriptor <span class="title function_">getValueTypeDescriptor</span><span class="params">(EvaluationContext context, <span class="meta">@Nullable</span> Object rootObject)</span> <span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Determine if an expression can be written to, i.e. setValue() can be called.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> rootObject the root object against which to evaluate the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> true&#125; if the expression is writable; &#123;<span class="doctag">@code</span> false&#125; otherwise</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem determining if it is writable</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="type">boolean</span> <span class="title function_">isWritable</span><span class="params">(<span class="meta">@Nullable</span> Object rootObject)</span> <span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Determine if an expression can be written to, i.e. setValue() can be called.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> context the context in which the expression should be checked</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> true&#125; if the expression is writable; &#123;<span class="doctag">@code</span> false&#125; otherwise</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem determining if it is writable</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="type">boolean</span> <span class="title function_">isWritable</span><span class="params">(EvaluationContext context)</span> <span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Determine if an expression can be written to, i.e. setValue() can be called.</span></span><br><span class="line"><span class="comment">	 * The supplied root object overrides any specified in the context.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> context the context in which the expression should be checked</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> rootObject the root object against which to evaluate the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> true&#125; if the expression is writable; &#123;<span class="doctag">@code</span> false&#125; otherwise</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem determining if it is writable</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="type">boolean</span> <span class="title function_">isWritable</span><span class="params">(EvaluationContext context, <span class="meta">@Nullable</span> Object rootObject)</span> <span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Set this expression in the provided context to the value provided.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> rootObject the root object against which to evaluate the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> value the new value</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem during evaluation</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">setValue</span><span class="params">(<span class="meta">@Nullable</span> Object rootObject, <span class="meta">@Nullable</span> Object value)</span> <span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Set this expression in the provided context to the value provided.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> context the context in which to set the value of the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> value the new value</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem during evaluation</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">setValue</span><span class="params">(EvaluationContext context, <span class="meta">@Nullable</span> Object value)</span> <span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Set this expression in the provided context to the value provided.</span></span><br><span class="line"><span class="comment">	 * The supplied root object overrides any specified in the context.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> context the context in which to set the value of the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> rootObject the root object against which to evaluate the expression</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> value the new value</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> EvaluationException if there is a problem during evaluation</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">setValue</span><span class="params">(EvaluationContext context, <span class="meta">@Nullable</span> Object rootObject, <span class="meta">@Nullable</span> Object value)</span> <span class="keyword">throws</span> EvaluationException;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>这个就是可以直接返回抽象对象的值操作，当然也可以引用上下文来进行返回，上下文可以对其中进行设置，然后抽象表达式对象也能进行感知操作，利用传递参数将两个类的逻辑进行嵌入理解</p>
<ul>
<li><pre><code class="java">@Nullable
    &lt;T&gt; T getValue(EvaluationContext context, @Nullable Object rootObject, @Nullable Class&lt;T&gt; desiredResultType)throws EvaluationException;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">对了，EL表达式是具备状态感知的，具体是通过语法解析器进行的操作，但是具体的实现我不太清楚，他居然呈现的是一种整体的状态，单个字符操作是不具备相关状态的，这确实是非常厉害的操作，这种整体相关，部分无关的思想，也是能够应用在现实生活之中的</span><br><span class="line"></span><br><span class="line">![image-20231125210337930](https://raw.githubusercontent.com/FBCD1012/TheImageRepository/main/image-20231125210337930.png)</span><br><span class="line"></span><br><span class="line">### 上下文内容对象</span><br><span class="line"></span><br><span class="line">上下文内容对象的实现本质是一个Kv键值对的操作，这样有助于寻找相关对象</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">/*</span><br><span class="line"> * Copyright 2002-2018 the original author or authors.</span><br><span class="line"> *</span><br><span class="line"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span><br><span class="line"> * you may not use this file except in compliance with the License.</span><br><span class="line"> * You may obtain a copy of the License at</span><br><span class="line"> *</span><br><span class="line"> *      https://www.apache.org/licenses/LICENSE-2.0</span><br><span class="line"> *</span><br><span class="line"> * Unless required by applicable law or agreed to in writing, software</span><br><span class="line"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class="line"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class="line"> * See the License for the specific language governing permissions and</span><br><span class="line"> * limitations under the License.</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">package org.springframework.expression;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import org.springframework.lang.Nullable;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Expressions are executed in an evaluation context. It is in this context that</span><br><span class="line"> * references are resolved when encountered during expression evaluation.</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;There is a default implementation of this EvaluationContext interface:</span><br><span class="line"> * &#123;@link org.springframework.expression.spel.support.StandardEvaluationContext&#125;</span><br><span class="line"> * which can be extended, rather than having to implement everything manually.</span><br><span class="line"> *</span><br><span class="line"> * @author Andy Clement</span><br><span class="line"> * @author Juergen Hoeller</span><br><span class="line"> * @since 3.0</span><br><span class="line"> */</span><br><span class="line">public interface EvaluationContext &#123;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * Return the default root context object against which unqualified</span><br><span class="line">	 * properties/methods/etc should be resolved. This can be overridden</span><br><span class="line">	 * when evaluating an expression.</span><br><span class="line">	 */</span><br><span class="line">	TypedValue getRootObject();</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * Return a list of accessors that will be asked in turn to read/write a property.</span><br><span class="line">	 */</span><br><span class="line">	List&lt;PropertyAccessor&gt; getPropertyAccessors();</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * Return a list of resolvers that will be asked in turn to locate a constructor.</span><br><span class="line">	 */</span><br><span class="line">	List&lt;ConstructorResolver&gt; getConstructorResolvers();</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * Return a list of resolvers that will be asked in turn to locate a method.</span><br><span class="line">	 */</span><br><span class="line">	List&lt;MethodResolver&gt; getMethodResolvers();</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * Return a bean resolver that can look up beans by name.</span><br><span class="line">	 */</span><br><span class="line">	@Nullable</span><br><span class="line">	BeanResolver getBeanResolver();</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * Return a type locator that can be used to find types, either by short or</span><br><span class="line">	 * fully qualified name.</span><br><span class="line">	 */</span><br><span class="line">	TypeLocator getTypeLocator();</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * Return a type converter that can convert (or coerce) a value from one type to another.</span><br><span class="line">	 */</span><br><span class="line">	TypeConverter getTypeConverter();</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * Return a type comparator for comparing pairs of objects for equality.</span><br><span class="line">	 */</span><br><span class="line">	TypeComparator getTypeComparator();</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * Return an operator overloader that may support mathematical operations</span><br><span class="line">	 * between more than the standard set of types.</span><br><span class="line">	 */</span><br><span class="line">	OperatorOverloader getOperatorOverloader();</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * Set a named variable within this evaluation context to a specified value.</span><br><span class="line">	 * @param name the name of the variable to set</span><br><span class="line">	 * @param value the value to be placed in the variable</span><br><span class="line">	 */</span><br><span class="line">	void setVariable(String name, @Nullable Object value);</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * Look up a named variable within this evaluation context.</span><br><span class="line">	 * @param name variable to lookup</span><br><span class="line">	 * @return the value of the variable, or &#123;@code null&#125; if not found</span><br><span class="line">	 */</span><br><span class="line">	@Nullable</span><br><span class="line">	Object lookupVariable(String name);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
<li><p>根对象的创建是利用构造方法来进行操作的，利用的构造对象进行的非常优质的操作，等到传入构造对象，获取根对象就能直接进行返回相关的参数值，这里返回到参数值也提供了相关方法</p>
</li>
</ul>
<p>一般此处的上下文对象进行的都是标准的对象上下文，当然也存在很多的实现，但是现在遇到了就只是单纯的一个类实现</p>
<p><img src="https://raw.githubusercontent.com/FBCD1012/TheImageRepository/main/image-20231125205814903.png" alt="image-20231125205814903"></p>
<h3 id="第一个EL表达式DEMO"><a href="#第一个EL表达式DEMO" class="headerlink" title="第一个EL表达式DEMO"></a>第一个EL表达式DEMO</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">package</span> com.example.springdemo.entity.SpEL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.EvaluationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.Expression;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.standard.SpelExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.support.StandardEvaluationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">theSpeL</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建语法解析器</span></span><br><span class="line">        ExpressionParser expressionParser=<span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>();</span><br><span class="line">        <span class="comment">//创建一个el表达式字符串</span></span><br><span class="line">        String theSpeLString=<span class="string">&quot;((&#x27;Hello&#x27;)+(&#x27;queen&#x27;)).toUpperCase()+(&#x27; &#x27;)+(&#x27;my husband is:&#x27;)+(#jack)&quot;</span>;</span><br><span class="line">        <span class="comment">//语法进行解析操作</span></span><br><span class="line">        Expression express=expressionParser.parseExpression(theSpeLString);</span><br><span class="line">        <span class="comment">//创建一个标准上下文内容操作器</span></span><br><span class="line">        <span class="comment">//注意此处使用标准上下文处理器进行操作</span></span><br><span class="line">        EvaluationContext evaluationContext=<span class="keyword">new</span> <span class="title class_">StandardEvaluationContext</span>();</span><br><span class="line">        evaluationContext.setVariable(<span class="string">&quot;jack&quot;</span>,<span class="string">&quot;king&quot;</span>);</span><br><span class="line">        <span class="comment">//获取处理之后的表达式字符串</span></span><br><span class="line">        System.out.println(express.getValue());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//以上就是总体的EL表达式的参数传递，总体用起来是非常简单的</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="EL表达式语法："><a href="#EL表达式语法：" class="headerlink" title="EL表达式语法："></a>EL表达式语法：</h2><p><img src="https://raw.githubusercontent.com/FBCD1012/TheImageRepository/main/image-20231122204501362.png" alt="image-20231122204501362"></p>
<ul>
<li>EvaluationContext与ParserContext是会一起连用的，但是基本上两者是具备单独的用法，一个是设置相关上下文进行增加操作，一个是进行解析，然后返回对象值，明晰在哪些地方两者能够进行一并连用操作，哪些地方不能进行连用操作，逻辑分离，但是嗲爱用可以进行连用</li>
</ul>
<h3 id="字面量表达式"><a href="#字面量表达式" class="headerlink" title="字面量表达式"></a>字面量表达式</h3><p><img src="https://raw.githubusercontent.com/FBCD1012/TheImageRepository/main/image-20231124170428041.png" alt="image-20231124170428041"></p>
<p>什么叫做字面量？字面量就是计算机中默认的固定值变量，也就是当程序员没有进行字面量设置的时候，也就是空值操作的时候，某些语言可以进行赋值，但是某些语言不会进行赋值操作，需要进行联合理解，也叫默认值，也叫初始值！</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.entity.SpEL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.Expression;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.standard.SpelExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.Assert;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">theSpeLType</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="comment">//创建表达式解析器</span></span><br><span class="line">        ExpressionParser expressionParser=<span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>();</span><br><span class="line">        <span class="comment">//利用解析器去进行解析相关句法操作</span></span><br><span class="line">        String theFirstGod=expressionParser.parseExpression(<span class="string">&quot;&#x27;Zeus&#x27;&quot;</span>).getValue(String.class);</span><br><span class="line">        System.out.println(Optional.of(expressionParser.parseExpression(<span class="string">&quot;&#x27;2&#x27;&quot;</span>).getValue(Integer.class).getClass().getName()));</span><br><span class="line">        System.out.println(Optional.of(expressionParser.parseExpression(<span class="string">&quot;&#x27;2.0&#x27;&quot;</span>).getValue(Float.class).getClass().getName()));</span><br><span class="line">        System.out.println(Optional.of(expressionParser.parseExpression(<span class="string">&quot;&#x27;2&#x27;&quot;</span>).getValue(Double.class).getClass().getName()));</span><br><span class="line">        System.out.println(Optional.of(expressionParser.parseExpression(<span class="string">&quot;&#x27;true&#x27;&quot;</span>).getValue(<span class="type">boolean</span>.class).getClass().getName()));</span><br><span class="line">        System.out.println(Optional.of(expressionParser.parseExpression(<span class="string">&quot;&#x27;d&#x27;&quot;</span>).getValue(Character.class).getClass().getName()));</span><br><span class="line">        <span class="comment">//那不也是单个字符串之间的理解操作吗</span></span><br><span class="line">        System.out.println(Optional.of(expressionParser.parseExpression(<span class="string">&quot;&#x27;2&#x27;&quot;</span>).getValue(<span class="type">byte</span>.class).getClass().getName()));</span><br><span class="line">        System.out.println(Optional.of(expressionParser.parseExpression(<span class="string">&quot;&#x27;2&#x27;&quot;</span>).getValue(<span class="type">char</span>.class).getClass().getName()));</span><br><span class="line">        System.out.println(Optional.of(expressionParser.parseExpression(<span class="string">&quot;&#x27;2&#x27;&quot;</span>).getValue(<span class="type">long</span>.class).getClass().getName()));</span><br><span class="line">        System.out.println(Optional.of(expressionParser.parseExpression(<span class="string">&quot;&#x27;0x333&#x27;&quot;</span>).getValue(Integer.class).getClass().getName()));</span><br><span class="line">        <span class="comment">//EL表达式能够将十六进制数转换为10进制数，优点厉害，又是一个非常优质的实现</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">value</span> <span class="operator">=</span> expressionParser.parseExpression(<span class="string">&quot;&#x27;0x333&#x27;&quot;</span>).getValue(Integer.class);</span><br><span class="line">        System.out.println(value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>SpEL表达式能够将十六进制数直接转换为十进制数，这是底层进行的封装操作，不深入理解了，总体的逻辑就是那个样子</p>
<h3 id="算数表达式"><a href="#算数表达式" class="headerlink" title="算数表达式"></a>算数表达式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.entity.SpEL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.Expression;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.standard.SpelExpressionParser;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">operationSpEL</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//加减乘除求余数</span></span><br><span class="line">        ExpressionParser express=<span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>();</span><br><span class="line">        <span class="comment">//原来中间的特殊符号是储存在这个地方的</span></span><br><span class="line">        String theAddResult=<span class="string">&quot;3+2&quot;</span>;</span><br><span class="line">        String theSubResult=<span class="string">&quot;99-88&quot;</span>;</span><br><span class="line">        String theMutiResult=<span class="string">&quot;3000*89832&quot;</span>;</span><br><span class="line">        String theModResult=<span class="string">&quot;99999/3232&quot;</span>;</span><br><span class="line">        String theModResult2=<span class="string">&quot;200%2&quot;</span>;</span><br><span class="line">        String theMidResult3=<span class="string">&quot;2^55&quot;</span>;</span><br><span class="line">        String theDiffcultResults=<span class="string">&quot;3+24234+23423-9883*(2344^22)/33%23&quot;</span>;</span><br><span class="line">        <span class="type">Expression</span> <span class="variable">expression</span> <span class="operator">=</span> express.parseExpression(theAddResult);</span><br><span class="line">        System.out.println(expression.getValue());</span><br><span class="line">        System.out.println(express.parseExpression(theSubResult).getValue(Integer.class));</span><br><span class="line">        System.out.println(express.parseExpression(theMutiResult).getValue(Integer.class));</span><br><span class="line">        System.out.println(express.parseExpression(theModResult).getValue(Integer.class));</span><br><span class="line">        System.out.println(express.parseExpression(theModResult2).getValue(Integer.class));</span><br><span class="line">        System.out.println(express.parseExpression(theMidResult3).getValue(BigInteger.class));</span><br><span class="line">        System.out.println(express.parseExpression(theDiffcultResults).getValue(BigInteger.class));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>SpEL表达式支持+，-，*，&#x2F;等运算符号，当然利用数学的理解也是可以进行理解操作的，算数表达符号的理解</li>
</ul>
<h3 id="关系表达式"><a href="#关系表达式" class="headerlink" title="关系表达式"></a>关系表达式</h3><blockquote>
<p>点评：关系表达式可以利用符号进行理解与实现，当然也可以像sql一样进行操作，利用表达式 GT LT BETWEEN …..进行操作</p>
</blockquote>
<p>关于使用英文大写操作的传递，此处我翻看了其底层源码</p>
<p><img src="https://raw.githubusercontent.com/FBCD1012/TheImageRepository/main/image-20231122213500313.png" alt="image-20231122213500313"></p>
<p>这是支持的几种符号化的语言：除，相等，大于，大于等于，小于，小于等于，取模，不等于，取反</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.entity.SpEL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.standard.SpelExpressionParser;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLOutput;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">theRelationShipSpEL</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//第一步创建一个语法解析器</span></span><br><span class="line">        ExpressionParser expression=<span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>();</span><br><span class="line">        System.out.println(expression.parseExpression(<span class="string">&quot;1&gt;=2&quot;</span>).getValue(Boolean.class));</span><br><span class="line">        System.out.println(expression.parseExpression(<span class="string">&quot;1&gt;=2 &amp;&amp; 2&lt;3 &amp;&amp; 4&gt;5 &amp;&amp; 1!=1&quot;</span>).getValue(Boolean.class));</span><br><span class="line">        System.out.println(expression.parseExpression(<span class="string">&quot;1&gt;=2 || 3&gt;2&quot;</span>).getValue(Boolean.class));</span><br><span class="line">        System.out.println(expression.parseExpression(<span class="string">&quot;1==2&quot;</span>).getValue(Boolean.class));</span><br><span class="line">        System.out.println(expression.parseExpression(<span class="string">&quot;1!=2&quot;</span>).getValue(Boolean.class));</span><br><span class="line">        System.out.println(expression.parseExpression(<span class="string">&quot;3&lt;=5&quot;</span>).getValue(Boolean.class));</span><br><span class="line">        System.out.println(expression.parseExpression(<span class="string">&quot;1 between &#123;1,2&#125;&quot;</span>).getValue(Boolean.class));</span><br><span class="line">        System.out.println(expression.parseExpression(<span class="string">&quot;0 between &#123;2,3&#125;&quot;</span>).getValue(Boolean.class));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//关于布尔取反呢？</span></span><br><span class="line">        System.out.println(expression.parseExpression(<span class="string">&quot;!true&quot;</span>).getValue(Boolean.class));</span><br><span class="line">        <span class="comment">//是否区分大小写？</span></span><br><span class="line">        System.out.println(expression.parseExpression(<span class="string">&quot;1 gt 2&quot;</span>).getValue(Boolean.class));</span><br><span class="line">        System.out.println(expression.parseExpression(<span class="string">&quot;1 GT 2&quot;</span>).getValue(Boolean.class));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;-----------------------------------------------------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        LOGIC SpEL:我自己所形成的一套理解操作，关于实现SpEL表达式所进行的理解操作，使用相关英文的理解形式来进行求解操作</span></span><br><span class="line"><span class="comment">        **/</span></span><br><span class="line">        System.out.println(expression.parseExpression(<span class="string">&quot;(99 GT (33-20)) AND true&quot;</span>).getValue(Boolean.class));</span><br><span class="line">        System.out.println(expression.parseExpression(<span class="string">&quot;NOT (2 BETWEEN &#123;2,3&#125;)&quot;</span>).getValue(Boolean.class));</span><br><span class="line">        System.out.println(expression.parseExpression(<span class="string">&quot;6&gt;8 AND (1 GT 2) || ((2 LT 3) AND NOT true)&quot;</span>).getValue(Boolean.class));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>BETWEEN 是两个都是闭区间</li>
</ul>
<h3 id="逻辑表达式"><a href="#逻辑表达式" class="headerlink" title="逻辑表达式"></a>逻辑表达式</h3><p>&amp;&amp; || ! AND OR NOT也可以进行逻辑操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">LOGIC SpEL:我自己所形成的一套理解操作，关于实现SpEL表达式所进行的理解操作，使用相关英文的理解形式来进行求解操作</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line">System.out.println(expression.parseExpression(<span class="string">&quot;(99 GT (33-20)) AND true&quot;</span>).getValue(Boolean.class));</span><br><span class="line">System.out.println(expression.parseExpression(<span class="string">&quot;NOT (2 BETWEEN &#123;2,3&#125;)&quot;</span>).getValue(Boolean.class));</span><br><span class="line">System.out.println(expression.parseExpression(<span class="string">&quot;6&gt;8 AND (1 GT 2) || ((2 LT 3) AND NOT true)&quot;</span>).getValue(Boolean.class));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="三目运算符"><a href="#三目运算符" class="headerlink" title="三目运算符"></a>三目运算符</h3><p>EL表达式支持三目运算符</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(expression.parseExpression(<span class="string">&quot;(3&gt;2)?&#x27;3大于2&#x27;:&#x27;3小于2，错误&#x27;&quot;</span>).getValue());</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.entity.SpEL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.standard.SpelExpressionParser;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">theStringSplit</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//利用括号，具备最高的优先级操作</span></span><br><span class="line">        ExpressionParser express=<span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>();</span><br><span class="line">        System.out.println(express.parseExpression(<span class="string">&quot;&#x27;i am the Zeus&#x27;[9]&quot;</span>).getValue());</span><br><span class="line"></span><br><span class="line">        System.out.println(express.parseExpression(<span class="string">&quot;3 GT 2 ? true:false&quot;</span>).getValue());</span><br><span class="line">        System.out.println(express.parseExpression(<span class="string">&quot;3 GT 2 ? &#x27;正确&#x27;:(&#x27;错误&#x27;)&quot;</span>).getValue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="类表达式"><a href="#类表达式" class="headerlink" title="类表达式"></a>类表达式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.entity.SpEL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.Expression;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.standard.SpelExpressionParser;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.print.DocFlavor;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TheClassSpEL</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建语法解析器</span></span><br><span class="line">        ExpressionParser expressionParser=<span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>();</span><br><span class="line">        String theClassSpEL=<span class="string">&quot;T(String)&quot;</span>;</span><br><span class="line">        Expression expression=expressionParser.parseExpression(theClassSpEL);</span><br><span class="line">        <span class="comment">//关于控制空指针的方法，此方法的源码是不会产生空指针的</span></span><br><span class="line">        <span class="comment">//return (a==b) || (a!=null &amp;&amp; a.equals(b))</span></span><br><span class="line">        <span class="comment">//当a==null的时候，函数返回值是不存在的，这就非常优质的表明了null指针是能够被处理的</span></span><br><span class="line">        System.out.println(Objects.equals(expression.getValue(Class.class), String.class));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取类中的静态变量</span></span><br><span class="line">        String theClassSpEL2=<span class="string">&quot;T(Integer).MAX_VALUE&quot;</span>;</span><br><span class="line">        Expression expression2=expressionParser.parseExpression(theClassSpEL2);</span><br><span class="line">        System.out.println(expression2.getValue());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取类中的静态方法调用</span></span><br><span class="line">        String theClassSpEL3=<span class="string">&quot;T(Integer).toHexString(&#x27;987&#x27;)&quot;</span>;</span><br><span class="line">        Expression expression3=expressionParser.parseExpression(theClassSpEL3);</span><br><span class="line">        System.out.println(expression3.getValue());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取其他包中的类</span></span><br><span class="line">        String theClassSpEL4=<span class="string">&quot;T(com.example.springdemo.entity.SpEL.operationSpEL)&quot;</span>;</span><br><span class="line">        Expression expression4=expressionParser.parseExpression(theClassSpEL4);</span><br><span class="line">        System.out.println(expression4.getValue(Class.class));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//什么时候该运用字符串进行操作什么时候不运用字符串进行操作那是非常需要注意的</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>关于前辈们解决空指针的操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Returns &#123;<span class="doctag">@code</span> true&#125; if the arguments are equal to each other</span></span><br><span class="line"><span class="comment"> * and &#123;<span class="doctag">@code</span> false&#125; otherwise.</span></span><br><span class="line"><span class="comment"> * Consequently, if both arguments are &#123;<span class="doctag">@code</span> null&#125;, &#123;<span class="doctag">@code</span> true&#125;</span></span><br><span class="line"><span class="comment"> * is returned.  Otherwise, if the first argument is not &#123;<span class="doctag">@code</span></span></span><br><span class="line"><span class="comment"> * null&#125;, equality is determined by calling the &#123;<span class="doctag">@link</span></span></span><br><span class="line"><span class="comment"> * Object#equals equals&#125; method of the first argument with the</span></span><br><span class="line"><span class="comment"> * second argument of this method. Otherwise, &#123;<span class="doctag">@code</span> false&#125; is</span></span><br><span class="line"><span class="comment"> * returned.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> a an object</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> b an object to be compared with &#123;<span class="doctag">@code</span> a&#125; for equality</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> true&#125; if the arguments are equal to each other</span></span><br><span class="line"><span class="comment"> * and &#123;<span class="doctag">@code</span> false&#125; otherwise</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> Object#equals(Object)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object a, Object b)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (a == b) || (a != <span class="literal">null</span> &amp;&amp; a.equals(b));</span><br><span class="line">&#125;</span><br><span class="line">  </span><br></pre></td></tr></table></figure></li>
</ul>
<p>如果存在一个空都是不会进行输出的，只有都为非空的情况才会进行输出</p>
<ul>
<li>利用类表达式可以直接调用静态方法，这个和java一致，没啥其他的，注意语法利用泛型操作就行了</li>
<li>可以调用静态变量，也可以调用静态方法，两个都是可以进行调用的</li>
</ul>
<h3 id="类实例化"><a href="#类实例化" class="headerlink" title="类实例化"></a>类实例化</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.entity.SpEL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.standard.SpelExpressionParser;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">instanceSpEL</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建一个EL表达式解析类</span></span><br><span class="line">        ExpressionParser expression=<span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>();</span><br><span class="line">        <span class="comment">//关键是构造参数理解操作，如何对相关的操作进行非常优质的理解</span></span><br><span class="line">        String theNewInstance=<span class="string">&quot;new String(&#x27;Acis&#x27;)&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> expression.parseExpression(theNewInstance).getValue(String.class);</span><br><span class="line">        System.out.println(value);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//构造参数进行非常规理解操作</span></span><br><span class="line">        String theNewInstance2=<span class="string">&quot;new Integer(&#x27;417&#x27;)&quot;</span>;</span><br><span class="line">        Integer MyName=expression.parseExpression(theNewInstance2).getValue(Integer.class);</span><br><span class="line">        System.out.println(MyName);</span><br><span class="line">        System.out.println(MyName.getClass().getTypeName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>直接进行对象的建立，可以进行自定义对象的创建，也可以直接使用标准类进行对象的建立，主要是使用相关语法</li>
</ul>
<h3 id="INSTANCEOF表达式"><a href="#INSTANCEOF表达式" class="headerlink" title="INSTANCEOF表达式"></a>INSTANCEOF表达式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.entity.SpEL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.Expression;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.standard.SpelExpressionParser;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InstanceOfSpEL</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ExpressionParser expres=<span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>();</span><br><span class="line">        String theInstanceOf=<span class="string">&quot;&#x27;jack&#x27; instanceof T(String)&quot;</span>;</span><br><span class="line">        Expression expression=expres.parseExpression(theInstanceOf);</span><br><span class="line">        System.out.println(expression.getValue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>检验类是否集成相关类的关键字,这些基本上都是java中老生常谈的问题了，我就不过多赘述了</p>
<h3 id="上下文root变量的设置已经自定义变量的操作"><a href="#上下文root变量的设置已经自定义变量的操作" class="headerlink" title="上下文root变量的设置已经自定义变量的操作"></a>上下文root变量的设置已经自定义变量的操作</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.entity.SpEL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.EvaluationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.standard.SpelExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.support.StandardEvaluationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">theVariable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ExpressionParser expres=<span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>();</span><br><span class="line">        <span class="comment">//标准上下文对象</span></span><br><span class="line">        EvaluationContext evaluationContext=<span class="keyword">new</span> <span class="title class_">StandardEvaluationContext</span>();</span><br><span class="line">        evaluationContext.setVariable(<span class="string">&quot;Zeus&quot;</span>,<span class="string">&quot;jack&quot;</span>);</span><br><span class="line">        evaluationContext.setVariable(<span class="string">&quot;jack&quot;</span>,<span class="string">&quot;queen&quot;</span>);</span><br><span class="line">        evaluationContext.setVariable(<span class="string">&quot;some&quot;</span>,<span class="string">&quot;theInnerTest&quot;</span>);</span><br><span class="line">        <span class="comment">//这种直接进行的操作是非常优质的理解之一，如何进行其中的参数设置那才是必要的</span></span><br><span class="line">        System.out.println(expres.parseExpression(<span class="string">&quot;#Zeus&quot;</span>).getValue(evaluationContext,expres));</span><br><span class="line">        System.out.println(expres.parseExpression(<span class="string">&quot;#jack&quot;</span>).getValue(evaluationContext,expres));</span><br><span class="line">        System.out.println(expres.parseExpression(<span class="string">&quot;#some&quot;</span>).getValue(evaluationContext,expres));</span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> expres.parseExpression(<span class="string">&quot;#this&quot;</span>).getValue(evaluationContext, String.class);</span><br><span class="line">        System.out.println(value);</span><br><span class="line">        <span class="comment">//创建一个根对象理解操作</span></span><br><span class="line">        EvaluationContext evaluationContextRooter=<span class="keyword">new</span> <span class="title class_">StandardEvaluationContext</span>(<span class="string">&quot;i am the rooter&quot;</span>);</span><br><span class="line">        System.out.println(expres.parseExpression(<span class="string">&quot;#root&quot;</span>).getValue(evaluationContextRooter,String.class));</span><br><span class="line">        System.out.println(expres.parseExpression(<span class="string">&quot;#this&quot;</span>).getValue(evaluationContextRooter, String.class));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>变量的设置基本上都是通过setVariable进行的操作，主要是其中存在一个Map集合类操作，容易进行放置操作</li>
<li>可以通过普通parseExpression进行访问，也就是我一直所讲究的生命周期方法</li>
</ul>
<p>如果你并没有实现自定义变量的操作，那么你就必须使用相关的root对象操作来进行理解，其内置一个根对象，可以通过#root进行访问，当然了，你也可以通过#this对当前所获取的变量进行操作，this 指当前变量的理解</p>
<h3 id="自定义函数"><a href="#自定义函数" class="headerlink" title="自定义函数"></a>自定义函数</h3><p>利用反射进行类的方法获取，然后将获取到的类的方法传入上下文自定义变量之中，然后再调用相关键进行获取方法，传入参数实现自定义函数的操作，利用反射的操作着实有点厉害!</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.entity.SpEL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.EvaluationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.Expression;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.standard.SpelExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.support.StandardEvaluationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">theDiyFunctionSpEL</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> NoSuchMethodException &#123;</span><br><span class="line">        <span class="comment">//利用反射来进行自定义的函数名称设置操作</span></span><br><span class="line">        StandardEvaluationContext evaluationContext=<span class="keyword">new</span> <span class="title class_">StandardEvaluationContext</span>();</span><br><span class="line">        <span class="comment">//反射的知识依然是需要进行回看的，此处的反射知识有一点生疏了</span></span><br><span class="line">        Method method= Integer.class.getDeclaredMethod(<span class="string">&quot;parseInt&quot;</span>, String.class);</span><br><span class="line">        ExpressionParser expression=<span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>();</span><br><span class="line">        evaluationContext.setVariable(<span class="string">&quot;parseInt1&quot;</span>,method);</span><br><span class="line">        evaluationContext.registerFunction(<span class="string">&quot;parseInt2&quot;</span>,method);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建相关的理解操作</span></span><br><span class="line">        System.out.println(expression.parseExpression(<span class="string">&quot;#parseInt1(&#x27;333&#x27;)&quot;</span>)</span><br><span class="line">                .getValue(evaluationContext,Integer.class)</span><br><span class="line">                .getClass().getTypeName());</span><br><span class="line">        <span class="comment">//实现自定义注解操作</span></span><br><span class="line">        System.out.println(expression.parseExpression(<span class="string">&quot;#parseInt2(&#x27;2424&#x27;)&quot;</span>)</span><br><span class="line">                .getValue(evaluationContext, Integer.class)</span><br><span class="line">                .getClass()</span><br><span class="line">                .getTypeName());</span><br><span class="line">        <span class="comment">//现在关于直接将类型进行转化又多了一种方式，利用SpEL表达式进行操作</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="表达式赋值"><a href="#表达式赋值" class="headerlink" title="表达式赋值"></a>表达式赋值</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.entity.SpEL;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.EvaluationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.standard.SpelExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.support.StandardEvaluationContext;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">theObjectValueSpELTest</span> &#123;</span><br><span class="line">    <span class="comment">//名称</span></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="comment">//年龄</span></span><br><span class="line">    <span class="keyword">protected</span> Integer age;</span><br><span class="line">    <span class="comment">//描述</span></span><br><span class="line">    <span class="keyword">protected</span> String description;</span><br><span class="line">    <span class="comment">//性格</span></span><br><span class="line">    <span class="keyword">protected</span> String thePersonality;</span><br><span class="line">    <span class="comment">//静态代码块</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;静态代码块进行加载了&quot;</span>);</span><br><span class="line">        <span class="comment">//创建句法解析器</span></span><br><span class="line">        <span class="type">ExpressionParser</span> <span class="variable">parser</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>();</span><br><span class="line">        <span class="comment">//传递对象进去了</span></span><br><span class="line">        theObjectValueSpELTest theObjectValueSpellExpress=<span class="keyword">new</span> <span class="title class_">theObjectValueSpELTest</span>();</span><br><span class="line">        theObjectValueSpellExpress.setName(<span class="string">&quot;Apollo&quot;</span>);</span><br><span class="line">        StandardEvaluationContext evaluationContext=<span class="keyword">new</span> <span class="title class_">StandardEvaluationContext</span>(theObjectValueSpellExpress);</span><br><span class="line">        System.out.println(parser.parseExpression(<span class="string">&quot;#root.name&quot;</span>).getValue(evaluationContext,String.class));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">//创建词法解析器</span></span><br><span class="line">        ExpressionParser expressionParser=<span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>();</span><br><span class="line">        EvaluationContext evaluationContext=<span class="keyword">new</span> <span class="title class_">StandardEvaluationContext</span>();</span><br><span class="line">        evaluationContext.setVariable(<span class="string">&quot;theObject&quot;</span>,<span class="keyword">new</span> <span class="title class_">theObjectValueSpELTest</span>());</span><br><span class="line">        expressionParser.parseExpression(<span class="string">&quot;#theObject.name&quot;</span>).setValue(evaluationContext,<span class="string">&quot;Zeus&quot;</span>);</span><br><span class="line">        System.out.println(expressionParser.parseExpression(<span class="string">&quot;#theObject.name&quot;</span>).getValue(evaluationContext,String.class));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        theObjectValueSpELTest theObjectValueSpElement=<span class="keyword">new</span> <span class="title class_">theObjectValueSpELTest</span>();</span><br><span class="line">        <span class="comment">//并非永久性的操作</span></span><br><span class="line">        System.out.println(theObjectValueSpElement.getName());</span><br><span class="line"></span><br><span class="line">        <span class="type">ExpressionParser</span> <span class="variable">parser</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>();</span><br><span class="line">        <span class="comment">//传递对象进去了</span></span><br><span class="line">        theObjectValueSpELTest theObjectValueSpellExpress=<span class="keyword">new</span> <span class="title class_">theObjectValueSpELTest</span>();</span><br><span class="line">        theObjectValueSpellExpress.setName(<span class="string">&quot;Apollo&quot;</span>);</span><br><span class="line">        StandardEvaluationContext evaluationContext=<span class="keyword">new</span> <span class="title class_">StandardEvaluationContext</span>(theObjectValueSpellExpress);</span><br><span class="line">        System.out.println(parser.parseExpression(<span class="string">&quot;#root.name&quot;</span>).getValue(evaluationContext,String.class));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>当然了，可以利用相关的操作实现永久化的储存，但是需要你在不同的时期干不同的事情，如何专注于对象的操作那才是必要的</p>
<h3 id="安全表达式"><a href="#安全表达式" class="headerlink" title="安全表达式"></a>安全表达式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.entity.SpEL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.springdemo.entity.SpEL.pojo.theBicycleFactoryInfo;</span><br><span class="line"><span class="keyword">import</span> com.example.springdemo.entity.SpEL.pojo.theBicycleInfo;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.EvaluationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.standard.SpelExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.support.StandardEvaluationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">safeIndexToGet</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        theBicycleInfo theBicycleInfo=<span class="keyword">new</span> <span class="title class_">theBicycleInfo</span>();</span><br><span class="line">        <span class="comment">//创建简单的解析器</span></span><br><span class="line">        ExpressionParser expressionParser=<span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>();</span><br><span class="line">        <span class="comment">//使用相关的上下文解析器操作</span></span><br><span class="line">        EvaluationContext evaluationContext=<span class="keyword">new</span> <span class="title class_">StandardEvaluationContext</span>();</span><br><span class="line">        evaluationContext.setVariable(<span class="string">&quot;theBicycleInfo&quot;</span>,theBicycleInfo);</span><br><span class="line">        <span class="comment">//嵌套类进行传递的时候原本的类是无法进行感知的，故调用的时候会出现一定的错误操作，产生空指针理解</span></span><br><span class="line"><span class="comment">//        System.out.println(expressionParser.parseExpression(&quot;#theBicycleInfo.theBicycleFactoryInfo.factoryName&quot;).getValue(evaluationContext, String.class));</span></span><br><span class="line">        <span class="comment">//安全访问修饰符可以进行相关的空对象的传递操作，可以进行非空的操作</span></span><br><span class="line">        System.out.println(expressionParser.parseExpression(<span class="string">&quot;#theBicycleInfo?.theBicycleFactoryInfo?.factoryName&quot;</span>).getValue(evaluationContext, String.class));</span><br><span class="line"><span class="comment">//        theBicycleFactoryInfo theBicycleFactoryInfo=new theBicycleFactoryInfo();</span></span><br><span class="line"><span class="comment">//        theBicycleFactoryInfo.setFactoryLocation(&quot;CDC&quot;);</span></span><br><span class="line"><span class="comment">//        theBicycleFactoryInfo.setFactoryName(&quot;XDS&quot;);</span></span><br><span class="line"><span class="comment">//        theBicycleFactoryInfo.setFactoryPrice(2000);</span></span><br><span class="line"></span><br><span class="line">        theBicycleInfo.setName(<span class="string">&quot;Zeus&quot;</span>);</span><br><span class="line">        theBicycleInfo.setAge(<span class="number">32</span>);</span><br><span class="line">        theBicycleInfo.setTheBicycleType(<span class="string">&quot;XDS&quot;</span>);</span><br><span class="line">        theBicycleInfo.setDescription(<span class="string">&quot;mountainCap&quot;</span>);</span><br><span class="line"><span class="comment">//        theBicycleInfo.setTheBicycleFactoryInfo(theBicycleFactoryInfo);</span></span><br><span class="line"></span><br><span class="line">        EvaluationContext evaluationContextDetail=<span class="keyword">new</span> <span class="title class_">StandardEvaluationContext</span>();</span><br><span class="line">        evaluationContextDetail.setVariable(<span class="string">&quot;theInnerBicycleInfo&quot;</span>,theBicycleInfo);</span><br><span class="line">        <span class="comment">//关键进行的传递理解</span></span><br><span class="line">        System.out.println(expressionParser.parseExpression(<span class="string">&quot;#theInnerBicycleInfo?.theBicycleFactoryInfo?.factoryName&quot;</span>).getValue(evaluationContextDetail, String.class));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>类嵌套类之间进行复杂调用</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.entity.SpEL.pojo;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">theBicycleInfo</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> String name;</span><br><span class="line">   <span class="keyword">public</span> Integer age;</span><br><span class="line">   <span class="keyword">public</span> String theBicycleType;</span><br><span class="line">   <span class="keyword">public</span> String Description;</span><br><span class="line">   <span class="keyword">public</span> theBicycleFactoryInfo theBicycleFactoryInfo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.entity.SpEL.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Builder;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">theBicycleFactoryInfo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String factoryName;</span><br><span class="line">    <span class="keyword">public</span> Integer factoryPrice;</span><br><span class="line">    <span class="keyword">public</span> String FactoryLocation;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>如果使用EL表达式直接进行调用类中嵌套类的话，会出现无法找到对应的Bean类操作，所以使用了?表达式之后，可以优质地去进行其中的操作理解，能够获取其中的操作</li>
</ul>
<p>当然了也可以实现root的调用操作，利用root来对相关操作进行调用理解，当然也能实现引用自定义调用</p>
<h3 id="Bean调用"><a href="#Bean调用" class="headerlink" title="Bean调用"></a>Bean调用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.entity.SpEL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.springdemo.entity.SpEL.pojo.theBicycleFactoryInfo;</span><br><span class="line"><span class="keyword">import</span> com.example.springdemo.entity.SpEL.pojo.theBicycleInfo;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.support.DefaultListableBeanFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.expression.BeanFactoryResolver;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.standard.SpelExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.support.StandardEvaluationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">theBeanSpEL</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建一个bean工厂监听器</span></span><br><span class="line">        DefaultListableBeanFactory defaultListableBeanFactory=<span class="keyword">new</span> <span class="title class_">DefaultListableBeanFactory</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建对应的对象</span></span><br><span class="line">        theBicycleInfo theBicycleInfo=<span class="keyword">new</span> <span class="title class_">theBicycleInfo</span>();</span><br><span class="line">        theBicycleInfo.setName(<span class="string">&quot;Charon&quot;</span>);</span><br><span class="line">        theBicycleInfo.setAge(<span class="number">22</span>);</span><br><span class="line">        theBicycleInfo.setDescription(<span class="string">&quot;this is why we play&quot;</span>);</span><br><span class="line">        theBicycleInfo.setTheBicycleType(<span class="string">&quot;The normal road&quot;</span>);</span><br><span class="line">        <span class="type">theBicycleFactoryInfo</span> <span class="variable">beiJing</span> <span class="operator">=</span> theBicycleFactoryInfo.builder().FactoryLocation(<span class="string">&quot;BeiJing&quot;</span>).factoryName(<span class="string">&quot;S-works&quot;</span>).factoryPrice(<span class="number">2333</span>).build();</span><br><span class="line">        theBicycleInfo.setTheBicycleFactoryInfo(beiJing);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//注册相关工厂bean（单例注册操作）</span></span><br><span class="line">        defaultListableBeanFactory.registerSingleton(<span class="string">&quot;theBicycleInfo&quot;</span>,theBicycleInfo);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建语法上下文操作</span></span><br><span class="line">        StandardEvaluationContext evaluationContext=<span class="keyword">new</span> <span class="title class_">StandardEvaluationContext</span>();</span><br><span class="line">        ExpressionParser expressionParser=<span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>();</span><br><span class="line">        evaluationContext.setBeanResolver(<span class="keyword">new</span> <span class="title class_">BeanFactoryResolver</span>(defaultListableBeanFactory));</span><br><span class="line"></span><br><span class="line">        System.out.println(expressionParser.parseExpression(<span class="string">&quot;@theBicycleInfo&quot;</span>).getValue(evaluationContext, theBicycleInfo.class));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>利用defaultListableBeanFatory 此类是进行的是手动注册bean操作，将对象直接手动注入到对象工厂之中，手动注入肯定是非常麻烦的，如果每一个类都进行这样的操作，你这不花费很多的事件吗，创建了好了相关的bean之后（需要进行单例bean的注册操作），传递入上下文变量设置中，再进行bean的解析操作，此处利用的是上下文的setBeanResolver操作</p>
</li>
<li><p>EL解析器进行调用的方式是通过@语法进行操作的，这样可以理解为一种引用</p>
</li>
</ul>
<h3 id="内联数组"><a href="#内联数组" class="headerlink" title="内联数组"></a>内联数组</h3><ul>
<li>静态数组动态数组的建立都是老生常谈的了，如果进行实现直接代码理解</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.entity.SpEL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.standard.SpelExpressionParser;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ListSpEL</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建相关的操作去进行解析相关的操作</span></span><br><span class="line">        ExpressionParser expres=<span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>();</span><br><span class="line">        List&lt;Integer&gt; theSpElements=expres.parseExpression(<span class="string">&quot;&#123;1,3,45,35,6416,417&#125;&quot;</span>).getValue(List.class);</span><br><span class="line">        <span class="keyword">assert</span> theSpElements != <span class="literal">null</span>;</span><br><span class="line">        theSpElements.forEach(System.out::println);</span><br><span class="line">        System.out.println(theSpElements.getClass().getTypeName());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; theDoubleArrayList=expres.parseExpression(<span class="string">&quot;&#123;&#123;3+2,417&#125;,&#123;2+3,3333&#125;&#125;&quot;</span>).getValue(List.class);</span><br><span class="line">        System.out.println(theDoubleArrayList);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> [] theAnother=expres.parseExpression(<span class="string">&quot;&#123;1,2,321,3,123&#125;&quot;</span>).getValue(<span class="type">int</span>[].class);</span><br><span class="line">        System.out.println(Arrays.toString(theAnother));</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] theNewAnother=expres.parseExpression(<span class="string">&quot;new int[3]&quot;</span>).getValue(<span class="type">int</span>[].class);</span><br><span class="line">        theNewAnother[<span class="number">0</span>]=<span class="number">98</span>;</span><br><span class="line">        System.out.println(Arrays.toString(theNewAnother));</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[][] theDoubleArray=expres.parseExpression(<span class="string">&quot;new int[2][3]&quot;</span>).getValue(<span class="type">int</span>[][].class);</span><br><span class="line">        theDoubleArray[<span class="number">0</span>][<span class="number">1</span>]=<span class="number">33</span>;</span><br><span class="line">        System.out.println(theDoubleArray[<span class="number">0</span>][<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="集合，字典，访问修改"><a href="#集合，字典，访问修改" class="headerlink" title="集合，字典，访问修改"></a>集合，字典，访问修改</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.entity.SpEL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.EvaluationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.standard.SpelExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.support.StandardEvaluationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CollectionSpELTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建一个语法解析器</span></span><br><span class="line">        ExpressionParser expressionParser=<span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>();</span><br><span class="line">        <span class="comment">//获取单个数组的元素变量操作，内连表达式操作</span></span><br><span class="line">        System.out.println(expressionParser.parseExpression(<span class="string">&quot;&#123;2,3,34&#125;[2]&quot;</span>).getValue(<span class="type">int</span>.class));</span><br><span class="line"></span><br><span class="line">        Collection&lt;Integer&gt; collection=<span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        collection.add(<span class="number">3</span>);</span><br><span class="line">        collection.add(<span class="number">23</span>);</span><br><span class="line">        collection.add(<span class="number">417</span>);</span><br><span class="line">        System.out.println(collection);</span><br><span class="line">        EvaluationContext evaluationContext=<span class="keyword">new</span> <span class="title class_">StandardEvaluationContext</span>();</span><br><span class="line">        evaluationContext.setVariable(<span class="string">&quot;collection&quot;</span>,collection);</span><br><span class="line">        System.out.println(expressionParser.parseExpression(<span class="string">&quot;#collection&quot;</span>).getValue(evaluationContext,Collection.class));</span><br><span class="line"></span><br><span class="line">        Stack&lt;Integer&gt; stack=<span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        stack.push(<span class="number">3</span>);</span><br><span class="line">        stack.push(<span class="number">22</span>);</span><br><span class="line">        stack.push(<span class="number">98</span>);</span><br><span class="line">        evaluationContext.setVariable(<span class="string">&quot;stack&quot;</span>,stack);</span><br><span class="line">        System.out.println(expressionParser.parseExpression(<span class="string">&quot;#stack&quot;</span>).getValue(evaluationContext,Stack.class).peek());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//利用EL表达式来修改相关元素的参数值</span></span><br><span class="line"></span><br><span class="line">        ArrayList&lt;Integer&gt; arrayList=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        arrayList.add(<span class="number">3</span>);</span><br><span class="line">        arrayList.add(<span class="number">22</span>);</span><br><span class="line">        arrayList.add(<span class="number">417</span>);</span><br><span class="line">        evaluationContext.setVariable(<span class="string">&quot;array&quot;</span>,arrayList);</span><br><span class="line">        <span class="comment">//注意应用程序上下文之间的空间操作理解，此处的上下文空间是需要进行逻辑连接的</span></span><br><span class="line">        expressionParser.parseExpression(<span class="string">&quot;#array[0]&quot;</span>).setValue(evaluationContext,<span class="number">33</span>);</span><br><span class="line">        System.out.println(expressionParser.parseExpression(<span class="string">&quot;#array[0]&quot;</span>).getValue(evaluationContext, <span class="type">int</span>.class));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>容器可以进行更换，主要是一种变量的传递以及上下文的理解</li>
</ul>
<blockquote>
<p>如果存在需要修改其中变量的值操作，一定是需要使用标准对象来进行操作的，千万不能使用元类进行操作</p>
</blockquote>
<h3 id="投影表达式-选择表达式"><a href="#投影表达式-选择表达式" class="headerlink" title="投影表达式&#x2F;选择表达式"></a>投影表达式&#x2F;选择表达式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.entity.SpEL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.EvaluationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.standard.SpelExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.support.StandardEvaluationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">theShdow</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建一个数组</span></span><br><span class="line">        List&lt;Integer&gt; theArrayList=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        theArrayList.add(<span class="number">3</span>);</span><br><span class="line">        theArrayList.add(<span class="number">418</span>);</span><br><span class="line">        theArrayList.add(<span class="number">78</span>);</span><br><span class="line">        theArrayList.add(<span class="number">33</span>);</span><br><span class="line">        theArrayList.add(<span class="number">276</span>);</span><br><span class="line">        <span class="comment">//标准词法解析器</span></span><br><span class="line">        ExpressionParser expres=<span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>();</span><br><span class="line">        <span class="type">EvaluationContext</span> <span class="variable">evaluationContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StandardEvaluationContext</span>();</span><br><span class="line">        evaluationContext.setVariable(<span class="string">&quot;collection&quot;</span>,theArrayList);</span><br><span class="line">        <span class="comment">//投影表达式操作，对每一个数组变量进行添加操作，并且实现相关的操作理解</span></span><br><span class="line">        <span class="type">Collection</span> <span class="variable">value</span> <span class="operator">=</span> expres.parseExpression(<span class="string">&quot;#collection.![(#this+1)*99]&quot;</span>).getValue(evaluationContext, Collection.class);</span><br><span class="line">        System.out.println(value);</span><br><span class="line">        <span class="comment">//不能进行持久化操作，需要对相关的上下文进行重新理解</span></span><br><span class="line">        evaluationContext.setVariable(<span class="string">&quot;collection&quot;</span>,value);</span><br><span class="line">        Collection theSelect=expres.parseExpression(<span class="string">&quot;#collection.?[#this &gt; 3000]&quot;</span>).getValue(evaluationContext,Collection.class);</span><br><span class="line">        System.out.println(theSelect);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//投影表达式与选择表达式进行联合理解操作</span></span><br><span class="line"></span><br><span class="line">        System.out.println(expres.parseExpression(<span class="string">&quot;#collection.?[#this &gt;4000].![#this+9999999]&quot;</span>).getValue(evaluationContext,Collection.class));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>投影表达式（.![投影表达式]）</p>
</li>
<li><p>选择表达式（.?[选择表达式]）</p>
</li>
<li><p>投影操作</p>
<ul>
<li>当然了投影还存在一种偏移投影的理解，这里我就只通过基本的IO投影操作了</li>
</ul>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/FBCD1012/TheImageRepository/main/image-20231125231724786.png" alt="image-20231125231724786"></p>
<ul>
<li>此处利用#this 操作显然是非常优质的，体现了一种函数式编程的思想理解</li>
</ul>
<h3 id="表达式模板"><a href="#表达式模板" class="headerlink" title="表达式模板"></a>表达式模板</h3><ul>
<li>点评：表达式模板给与了我们一些对表达式自定义操作的方法，让SPEL表达式不止是#符号，也可以进行其他符号的理解，其实这种符号理解其实是非常优质的东西，很多都借用了这种SPEL表达式的方法，例如利用SQL进行的语法注入操作，这里就完全能够体现了这个表达式模板的好处，逻辑与数据分离，非常重要的东西</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.entity.SpEL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.EvaluationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.Expression;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ParserContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.standard.SpelExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.support.StandardEvaluationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">parserContext</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//第一步依然是执行语法解析器操作</span></span><br><span class="line">        ExpressionParser expression=<span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>();</span><br><span class="line">        <span class="comment">//定义模板类操作实现</span></span><br><span class="line">        ParserContext parserContext=<span class="keyword">new</span> <span class="title class_">ParserContext</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> String <span class="title function_">getExpressionPrefix</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;&amp;&#123;&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> String <span class="title function_">getExpressionSuffix</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        String template=<span class="string">&quot;&amp;&#123;&#x27;Zeus&#x27;&#125;,&amp;&#123;&#x27;Apollo&#x27;&#125;,&amp;&#123;&#x27;Gods&#x27;&#125;,&amp;&#123;#jack&#125;&quot;</span>;</span><br><span class="line">        <span class="comment">//创建标准上下文操作</span></span><br><span class="line">        EvaluationContext evaluationContext=<span class="keyword">new</span> <span class="title class_">StandardEvaluationContext</span>();</span><br><span class="line">        evaluationContext.setVariable(<span class="string">&quot;jack&quot;</span>,<span class="string">&quot;Artemis&quot;</span>);</span><br><span class="line">        <span class="type">Expression</span> <span class="variable">expression1</span> <span class="operator">=</span> expression.parseExpression(template, parserContext);</span><br><span class="line">        System.out.println(expression1.getValue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>可以进行参数的分离，形成一定的块结构，然后对块结构进行操作</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.entity.SpEL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.EvaluationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.Expression;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ParserContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.standard.SpelExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.support.StandardEvaluationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">theTemplateSpEL</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建语法解析器</span></span><br><span class="line">        ExpressionParser expr=<span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>();</span><br><span class="line">        <span class="comment">//构建模板表达式操作</span></span><br><span class="line">        ParserContext parserContext=<span class="keyword">new</span> <span class="title class_">ParserContext</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> String <span class="title function_">getExpressionPrefix</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;#&#123;&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> String <span class="title function_">getExpressionSuffix</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">//利用此处的模板操作也需要进行字符串的框选吗？</span></span><br><span class="line">        String template=<span class="string">&quot;#&#123;&#x27;Hello&#x27;&#125;,#&#123;&#x27;World&#x27;&#125;,#&#123;#some&#125;&quot;</span>;</span><br><span class="line">        <span class="comment">//关键式如何对此处的操作进行理解？使用模板操作还能进行一些变量的设置操作吗</span></span><br><span class="line">        <span class="type">Expression</span> <span class="variable">expression</span> <span class="operator">=</span> expr.parseExpression(template, parserContext);</span><br><span class="line">        <span class="comment">//利用上下文是无法对模板类进行解析赋值操作的</span></span><br><span class="line">        EvaluationContext evaluationContext=<span class="keyword">new</span> <span class="title class_">StandardEvaluationContext</span>();</span><br><span class="line">        evaluationContext.setVariable(<span class="string">&quot;some&quot;</span>,<span class="string">&quot;queen&quot;</span>);</span><br><span class="line">        System.out.println(expression.getValue(evaluationContext));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>传递操作千万注意要传递相关的上下文变量理解操作！！！！！</li>
</ul>
<h3 id="关于Spring中实现的SpEL表达式操作"><a href="#关于Spring中实现的SpEL表达式操作" class="headerlink" title="关于Spring中实现的SpEL表达式操作"></a>关于Spring中实现的SpEL表达式操作</h3><ul>
<li>利用配置文件传递键值参数到SpEL表达式中进行操作理解</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.Configuration;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.springdemo.entity.*;</span><br><span class="line"><span class="keyword">import</span> com.example.springdemo.pojoInterface.theComputerType;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.EnableAsync;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.EnableScheduling;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//定义配置文件操作</span></span><br><span class="line"><span class="comment">//实现异步操作</span></span><br><span class="line"><span class="meta">@EnableAsync</span></span><br><span class="line"><span class="comment">//实现</span></span><br><span class="line"><span class="meta">@EnableScheduling</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//多个组件之间的扫描操作</span></span><br><span class="line"><span class="meta">@ComponentScans(&#123;</span></span><br><span class="line"><span class="meta">        @ComponentScan(&quot;com.example.springdemo.entity&quot;),</span></span><br><span class="line"><span class="meta">        @ComponentScan(&quot;com.example.springdemo.entity.theAware&quot;),</span></span><br><span class="line"><span class="meta">        @ComponentScan(&quot;com.example.springdemo.entityWatchContruct&quot;),</span></span><br><span class="line"><span class="meta">        @ComponentScan(&quot;com.example.springdemo.entity.Task&quot;),</span></span><br><span class="line"><span class="meta">        @ComponentScan(&quot;com.example.springdemo.entity.Listener&quot;),</span></span><br><span class="line"><span class="meta">        @ComponentScan(&quot;com.example.springdemo.entity.SpEL&quot;),</span></span><br><span class="line"><span class="meta">        @ComponentScan(&quot;com.example.springdemo.entity.SpEL.pojo&quot;)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:theProperties.properties&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">theConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>传入配置文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PropertySource(&quot;classpath:theProperties.properties&quot;)</span></span><br></pre></td></tr></table></figure>

<p>[【文字+图示】Java项目中类路径classpath具体指的是哪个路径_java中的类路径是指什么_超周到的程序员的博客-CSDN博客](<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_46360532/article/details/114498540#:~:text=%E7%B1%BB%E8%B7%AF%E5%BE%84classpath%E6%8C%87%E7%9A%84%E6%98%AF%E7%BC%96%E8%AF%91%E5%90%8E%E8%B7%AF%E5%BE%84%E5%8D%B3%3A%E6%9C%AC%E9%A1%B9%E7%9B%AE">https://blog.csdn.net/m0_46360532/article/details/114498540#:~:text=类路径classpath指的是编译后路径即%3A本项目</a> [或模块目录]%2Ftarget%2F,[项目或模块名]%2FWEB-INF%2Fclasses如下图： java目录中的文件和recource目录中的文件经过编译后，都会放到WEB-INF%2Fclasses目录下：_java中的类路径是指什么)</p>
<p><img src="https://raw.githubusercontent.com/FBCD1012/TheImageRepository/main/image-20231121114958560.png" alt="image-20231121114958560"></p>
<ul>
<li>CLASSPATH是项目编译时所产生的编译文件路径</li>
</ul>
<p><img src="https://raw.githubusercontent.com/FBCD1012/TheImageRepository/main/image-20231125233332716.png" alt="image-20231125233332716"></p>
<ul>
<li>也就是此处的路径，在此处获取相关配置文件的操作</li>
</ul>
<p>配置文件</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">king</span>=<span class="string">fbcd</span></span><br></pre></td></tr></table></figure>

<ul>
<li>此处以一个非常简单的例子来进行理解，如果此处会在后续的项目中进行参数的传递，存在这种文件中的参数并不是安全的，存在系统中的变量，那才是非常安全的，这种变量可以放置网络抓包操作！</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.entity.SpEL;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> jakarta.annotation.security.DenyAll;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component(&quot;theValue&quot;)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">theValue</span> &#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="comment">//实现参数值的注入操作</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">theValue</span><span class="params">(<span class="meta">@Value(&quot;$&#123;king&#125;&quot;)</span>String name)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>获取到参数之后传递给相关的变量，然后通过调用获取相关变量进行操作理解</li>
</ul>
<p>如果我们在项目之中也想形成自定义理解呢？</p>
<ul>
<li>在BEANFACTORYPOSEPRECESSOR处进行操作，也就是在Bean初始化阶段进行表达式解析，进行自定义操作理解</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springdemo.entity.SpEL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.BeansException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.BeanClassLoaderAware;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.config.BeanExpressionResolver;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.config.BeanFactoryPostProcessor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.config.ConfigurableListableBeanFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.expression.StandardBeanExpressionResolver;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">theComponentTest</span> <span class="keyword">implements</span> <span class="title class_">BeanFactoryPostProcessor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postProcessBeanFactory</span><span class="params">(ConfigurableListableBeanFactory beanFactory)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        <span class="comment">//获取相关的bean表达式解析器，这种解析器是存在与生命周期的前部分的操作的</span></span><br><span class="line">        <span class="type">BeanExpressionResolver</span> <span class="variable">beanExpressionResolver</span> <span class="operator">=</span> beanFactory.getBeanExpressionResolver();</span><br><span class="line">        <span class="comment">//如果相关组件进行了注册操作，那么进行相关的模板语法解析</span></span><br><span class="line">        <span class="keyword">if</span> (beanExpressionResolver <span class="keyword">instanceof</span> StandardBeanExpressionResolver)&#123;</span><br><span class="line">            StandardBeanExpressionResolver standardBeanExpressionResolver= (StandardBeanExpressionResolver)beanExpressionResolver;</span><br><span class="line">            standardBeanExpressionResolver.setExpressionPrefix(<span class="string">&quot;&amp;&#123;&quot;</span>);</span><br><span class="line">            standardBeanExpressionResolver.setExpressionSuffix(<span class="string">&quot;&#125;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>自动获取相关的bean表达式解析对象，通过工厂方法进行获取，然后判断获取到的对象是否是继承与标准对象解析，如何理解此处，那是因为如果存在非标准解析类操作，所做的事情是完全不一样的，上面我有提到过！通过标准类直接解析相关符号，注意前置后置千万不能写错了，这里是一个易错点！</p>
<ul>
<li>这个解析类也是SPRING-SPEL模块所进行的核心实现，进行这个类的标准调用就是对整个容器空间进行定义</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Copyright 2002-2021 the original author or authors.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></span><br><span class="line"><span class="comment"> * you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment"> * You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *      https://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span><br><span class="line"><span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment"> * See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment"> * limitations under the License.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> org.springframework.context.expression;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ConcurrentHashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.BeansException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.BeanExpressionException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.config.BeanExpressionContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.config.BeanExpressionResolver;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.convert.ConversionService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.convert.support.DefaultConversionService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.Expression;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.ParserContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.SpelParserConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.standard.SpelExpressionParser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.support.StandardEvaluationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.support.StandardTypeConverter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.expression.spel.support.StandardTypeLocator;</span><br><span class="line"><span class="keyword">import</span> org.springframework.lang.Nullable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.Assert;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Standard implementation of the</span></span><br><span class="line"><span class="comment"> * &#123;<span class="doctag">@link</span> org.springframework.beans.factory.config.BeanExpressionResolver&#125;</span></span><br><span class="line"><span class="comment"> * interface, parsing and evaluating Spring EL using Spring&#x27;s expression module.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;All beans in the containing &#123;<span class="doctag">@code</span> BeanFactory&#125; are made available as</span></span><br><span class="line"><span class="comment"> * predefined variables with their common bean name, including standard context</span></span><br><span class="line"><span class="comment"> * beans such as &quot;environment&quot;, &quot;systemProperties&quot; and &quot;systemEnvironment&quot;.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Juergen Hoeller</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 3.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> BeanExpressionContext#getBeanFactory()</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> org.springframework.expression.ExpressionParser</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> org.springframework.expression.spel.standard.SpelExpressionParser</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> org.springframework.expression.spel.support.StandardEvaluationContext</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StandardBeanExpressionResolver</span> <span class="keyword">implements</span> <span class="title class_">BeanExpressionResolver</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** Default expression prefix: &quot;#&#123;&quot;. */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEFAULT_EXPRESSION_PREFIX</span> <span class="operator">=</span> <span class="string">&quot;#&#123;&quot;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** Default expression suffix: &quot;&#125;&quot;. */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEFAULT_EXPRESSION_SUFFIX</span> <span class="operator">=</span> <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="type">String</span> <span class="variable">expressionPrefix</span> <span class="operator">=</span> DEFAULT_EXPRESSION_PREFIX;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="type">String</span> <span class="variable">expressionSuffix</span> <span class="operator">=</span> DEFAULT_EXPRESSION_SUFFIX;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> ExpressionParser expressionParser;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> Map&lt;String, Expression&gt; expressionCache = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;(<span class="number">256</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> Map&lt;BeanExpressionContext, StandardEvaluationContext&gt; evaluationCache = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;(<span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ParserContext</span> <span class="variable">beanExpressionParserContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ParserContext</span>() &#123;</span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="keyword">public</span> String <span class="title function_">getExpressionPrefix</span><span class="params">()</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> expressionPrefix;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="keyword">public</span> String <span class="title function_">getExpressionSuffix</span><span class="params">()</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> expressionSuffix;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Create a new &#123;<span class="doctag">@code</span> StandardBeanExpressionResolver&#125; with default settings.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">StandardBeanExpressionResolver</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.expressionParser = <span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Create a new &#123;<span class="doctag">@code</span> StandardBeanExpressionResolver&#125; with the given bean class loader,</span></span><br><span class="line"><span class="comment">	 * using it as the basis for expression compilation.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> beanClassLoader the factory&#x27;s bean class loader</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">StandardBeanExpressionResolver</span><span class="params">(<span class="meta">@Nullable</span> ClassLoader beanClassLoader)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.expressionParser = <span class="keyword">new</span> <span class="title class_">SpelExpressionParser</span>(<span class="keyword">new</span> <span class="title class_">SpelParserConfiguration</span>(<span class="literal">null</span>, beanClassLoader));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Set the prefix that an expression string starts with.</span></span><br><span class="line"><span class="comment">	 * The default is &quot;#&#123;&quot;.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> #DEFAULT_EXPRESSION_PREFIX</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setExpressionPrefix</span><span class="params">(String expressionPrefix)</span> &#123;</span><br><span class="line">		Assert.hasText(expressionPrefix, <span class="string">&quot;Expression prefix must not be empty&quot;</span>);</span><br><span class="line">		<span class="built_in">this</span>.expressionPrefix = expressionPrefix;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Set the suffix that an expression string ends with.</span></span><br><span class="line"><span class="comment">	 * The default is &quot;&#125;&quot;.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> #DEFAULT_EXPRESSION_SUFFIX</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setExpressionSuffix</span><span class="params">(String expressionSuffix)</span> &#123;</span><br><span class="line">		Assert.hasText(expressionSuffix, <span class="string">&quot;Expression suffix must not be empty&quot;</span>);</span><br><span class="line">		<span class="built_in">this</span>.expressionSuffix = expressionSuffix;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Specify the EL parser to use for expression parsing.</span></span><br><span class="line"><span class="comment">	 * &lt;p&gt;Default is a &#123;<span class="doctag">@link</span> org.springframework.expression.spel.standard.SpelExpressionParser&#125;,</span></span><br><span class="line"><span class="comment">	 * compatible with standard Unified EL style expression syntax.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setExpressionParser</span><span class="params">(ExpressionParser expressionParser)</span> &#123;</span><br><span class="line">		Assert.notNull(expressionParser, <span class="string">&quot;ExpressionParser must not be null&quot;</span>);</span><br><span class="line">		<span class="built_in">this</span>.expressionParser = expressionParser;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	<span class="keyword">public</span> Object <span class="title function_">evaluate</span><span class="params">(<span class="meta">@Nullable</span> String value, BeanExpressionContext beanExpressionContext)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">		<span class="keyword">if</span> (!StringUtils.hasLength(value)) &#123;</span><br><span class="line">			<span class="keyword">return</span> value;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="type">Expression</span> <span class="variable">expr</span> <span class="operator">=</span> <span class="built_in">this</span>.expressionCache.get(value);</span><br><span class="line">			<span class="keyword">if</span> (expr == <span class="literal">null</span>) &#123;</span><br><span class="line">				expr = <span class="built_in">this</span>.expressionParser.parseExpression(value, <span class="built_in">this</span>.beanExpressionParserContext);</span><br><span class="line">				<span class="built_in">this</span>.expressionCache.put(value, expr);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="type">StandardEvaluationContext</span> <span class="variable">sec</span> <span class="operator">=</span> <span class="built_in">this</span>.evaluationCache.get(beanExpressionContext);</span><br><span class="line">			<span class="keyword">if</span> (sec == <span class="literal">null</span>) &#123;</span><br><span class="line">				sec = <span class="keyword">new</span> <span class="title class_">StandardEvaluationContext</span>(beanExpressionContext);</span><br><span class="line">				sec.addPropertyAccessor(<span class="keyword">new</span> <span class="title class_">BeanExpressionContextAccessor</span>());</span><br><span class="line">				sec.addPropertyAccessor(<span class="keyword">new</span> <span class="title class_">BeanFactoryAccessor</span>());</span><br><span class="line">				sec.addPropertyAccessor(<span class="keyword">new</span> <span class="title class_">MapAccessor</span>());</span><br><span class="line">				sec.addPropertyAccessor(<span class="keyword">new</span> <span class="title class_">EnvironmentAccessor</span>());</span><br><span class="line">				sec.setBeanResolver(<span class="keyword">new</span> <span class="title class_">BeanFactoryResolver</span>(beanExpressionContext.getBeanFactory()));</span><br><span class="line">				sec.setTypeLocator(<span class="keyword">new</span> <span class="title class_">StandardTypeLocator</span>(beanExpressionContext.getBeanFactory().getBeanClassLoader()));</span><br><span class="line">				sec.setTypeConverter(<span class="keyword">new</span> <span class="title class_">StandardTypeConverter</span>(() -&gt; &#123;</span><br><span class="line">					<span class="type">ConversionService</span> <span class="variable">cs</span> <span class="operator">=</span> beanExpressionContext.getBeanFactory().getConversionService();</span><br><span class="line">					<span class="keyword">return</span> (cs != <span class="literal">null</span> ? cs : DefaultConversionService.getSharedInstance());</span><br><span class="line">				&#125;));</span><br><span class="line">				customizeEvaluationContext(sec);</span><br><span class="line">				<span class="built_in">this</span>.evaluationCache.put(beanExpressionContext, sec);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> expr.getValue(sec);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">catch</span> (Throwable ex) &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BeanExpressionException</span>(<span class="string">&quot;Expression parsing failed&quot;</span>, ex);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Template method for customizing the expression evaluation context.</span></span><br><span class="line"><span class="comment">	 * &lt;p&gt;The default implementation is empty.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">customizeEvaluationContext</span><span class="params">(StandardEvaluationContext evalContext)</span> &#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>完全能够发现，他所实现也是之前内部模板的实现操作，总体的逻辑就完全链接在一起了</li>
</ul>
<p>总说：</p>
<p>SpEL所带来的程序与数据分离，逻辑配置与约定分离的操作，是贯穿整个Spring框架的学习路程的，学习完整个表达式之后，关于整个框架的理解，上了一个档次，也为之前所获取到的知识点升华了许多，总的来说，梳理好，抽象好整个Project的的逻辑比单纯学一门操作来的实在，并且深刻，这就是SpEL表达式，一个涉及范围非常广的表达式，当然了可能内部源码我还没有分析透，希望以后继续学习</p>

    </div>

    
        <hr class="fhr">
        <div id="vcomments"></div>
    
</div>
    <div class="footer" id="footer">
    <p>Copyright © 2020 <a class="flink" target="_blank" rel="noopener" href="https://hexo.io">Hexo</a>-<a class="flink" target="_blank" rel="noopener" href="https://github.com/sanjinhub/hexo-theme-geek">Geek</a>.
        <label class="el-switch el-switch-green el-switch-sm" style="vertical-align: sub;">
            <input type="checkbox" name="switch" id="update_style">
            <span class="el-switch-style"></span>
        </label>
<!--         <script type="text/javascript">
        var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");
        document.write(unescape("%3Cspan id='cnzz_stat_icon_1278548644'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/stat.php%3Fid%3D1278548644%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
        </script> -->
    </p>
</div>
<input type="hidden" id="web_style" value="black">
<input type="hidden" id="valine_appid" value="CmCti21ooOOIzFOhEyFkFvR0-gzGzoHsz">
<input type="hidden" id="valine_appKey" value="FqiyUqbg7McKN2eG0MCewupf">

<script src="/libs/jquery.min.js"></script>


<script src="/libs/highlight/highlight.pack.js"></script>

<script src='//cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>

<script src="/js/js.js"></script>

<style type="text/css">
.v * {
    color: #698fca;
}

.v .vlist .vcard .vhead .vsys {
    color: #3a3e4a;
}

.v .vlist .vcard .vh .vmeta .vat {
    color: #638fd5;
}

.v .vlist .vcard .vhead .vnick {
    color: #6ba1ff;
}

.v a {
    color: #8696b1;
}

.v .vlist .vcard .vhead .vnick:hover {
    color: #669bfc;
}
</style>
</body>

</html>